# SSUspot SNS 프로젝트 개선 작업 목록

## 개요
이 문서는 SNS 프로젝트의 문제점들을 해결하기 위한 구체적인 작업 목록입니다. 각 작업은 우선순위와 예상 소요 시간을 포함하며, 테스트 코드 작성이 각 단계에서 필수적으로 포함됩니다.

## Phase 1: Critical Security Issues (1-2주)

### 1.1 인증/인가 시스템 구현
**우선순위: Critical | 예상 소요: 3일**

#### Tasks:
1. **Security Config 수정**
   - [ ] 인증이 필요한 엔드포인트 보호 설정
   - [ ] CORS 설정 구체화
   - [ ] SecurityConfig 단위 테스트 작성

2. **JWT 토큰 검증 강화**
   - [ ] 토큰 만료 시간 검증 로직 추가
   - [ ] 토큰 블랙리스트 메커니즘 구현
   - [ ] RefreshToken Redis 캐싱 구현
   - [ ] JWT 관련 통합 테스트 작성

3. **예외 처리 개선**
   - [ ] JWT 파싱 실패 시 적절한 예외 처리
   - [ ] 401/403 응답 표준화
   - [ ] 예외 처리 단위 테스트 작성

### 1.2 환경 변수 및 시크릿 관리
**우선순위: Critical | 예상 소요: 1일**

#### Tasks:
1. **민감 정보 외부화**
   - [ ] application.yml에서 하드코딩된 비밀번호 제거
   - [ ] docker-compose.yml 환경 변수화
   - [ ] .env.example 파일 생성
   - [ ] 환경 변수 로딩 테스트 작성

2. **프로필별 설정 분리**
   - [ ] application-dev.yml 생성
   - [ ] application-prod.yml 생성
   - [ ] application-test.yml 생성
   - [ ] 프로필별 설정 로딩 테스트

## Phase 2: 의존성 및 인프라 개선 (1주)

### 2.1 Spring Boot 업그레이드
**우선순위: High | 예상 소요: 2일**

#### Tasks:
1. **Spring Boot 3.x 마이그레이션**
   - [ ] Spring Boot 2.7.7 → 3.2.x 업그레이드
   - [ ] Jakarta EE 네임스페이스 마이그레이션
   - [ ] 모든 기존 테스트가 통과하는지 확인
   - [ ] 업그레이드 후 통합 테스트 추가

2. **의존성 업데이트**
   - [ ] JWT 라이브러리 0.10.5 → 0.11.5 업그레이드
   - [ ] Gradle deprecated 문법 수정 (compile → implementation)
   - [ ] 중복 의존성 제거
   - [ ] 의존성 충돌 테스트

### 2.2 데이터베이스 설정 개선
**우선순위: High | 예상 소요: 1일**

#### Tasks:
1. **JPA 설정 최적화**
   - [ ] ddl-auto를 validate로 변경 (prod 환경)
   - [ ] show-sql을 false로 변경 (prod 환경)
   - [ ] Flyway 또는 Liquibase 도입
   - [ ] 마이그레이션 스크립트 테스트 작성

2. **연결 풀 설정**
   - [ ] HikariCP 설정 최적화
   - [ ] 연결 풀 모니터링 추가
   - [ ] 연결 풀 성능 테스트

## Phase 3: API 및 아키텍처 개선 (2-3주)

### 3.1 REST API 표준화
**우선순위: High | 예상 소요: 3일**

#### Tasks:
1. **URL 패턴 통일**
   - [ ] RESTful URL 설계 문서 작성
   - [ ] 기존 API 엔드포인트 리팩토링
   - [ ] API 버저닝 전략 수립
   - [ ] 각 엔드포인트별 통합 테스트 작성

2. **요청/응답 표준화**
   - [ ] 공통 응답 래퍼 클래스 생성
   - [ ] 페이지네이션 표준화
   - [ ] 에러 응답 형식 통일
   - [ ] 응답 형식 검증 테스트

### 3.2 레이어 책임 분리
**우선순위: High | 예상 소요: 5일**

#### Tasks:
1. **DTO 분리**
   - [ ] 엔티티에서 toDto() 메서드 제거
   - [ ] 전용 Mapper 클래스 생성
   - [ ] Request/Response DTO 정리
   - [ ] Mapper 단위 테스트 작성

2. **서비스 레이어 리팩토링**
   - [ ] 중복 메서드 제거
   - [ ] 트랜잭션 경계 명확화
   - [ ] 비즈니스 로직 단위 테스트 작성

3. **리포지토리 레이어 개선**
   - [ ] Custom Repository 공통 로직 추출
   - [ ] 트랜잭션 어노테이션 서비스로 이동
   - [ ] 리포지토리 단위 테스트 작성

### 3.3 도메인 모델 개선
**우선순위: Medium | 예상 소요: 3일**

#### Tasks:
1. **엔티티 리팩토링**
   - [ ] 양방향 연관관계 검토 및 단방향으로 변경
   - [ ] CascadeType 적절히 조정
   - [ ] 불변 필드는 val로 변경
   - [ ] 엔티티 생성/수정 테스트

2. **값 객체 도입**
   - [ ] Email, Password 등 값 객체 생성
   - [ ] 도메인 규칙 캡슐화
   - [ ] 값 객체 단위 테스트

## Phase 4: 성능 최적화 (1-2주)

### 4.1 쿼리 최적화
**우선순위: Medium | 예상 소요: 3일**

#### Tasks:
1. **N+1 문제 해결**
   - [ ] Fetch Join 적용
   - [ ] @EntityGraph 활용
   - [ ] 쿼리 실행 계획 분석
   - [ ] 성능 개선 검증 테스트

2. **인덱스 최적화**
   - [ ] 자주 사용되는 쿼리 분석
   - [ ] 적절한 인덱스 추가
   - [ ] 인덱스 성능 테스트

### 4.2 캐싱 구현
**우선순위: Medium | 예상 소요: 2일**

#### Tasks:
1. **Redis 캐싱 적용**
   - [ ] 자주 조회되는 데이터 식별
   - [ ] 캐싱 전략 수립 (TTL, 무효화)
   - [ ] 캐시 레이어 구현
   - [ ] 캐시 히트율 모니터링
   - [ ] 캐싱 통합 테스트

2. **Spring Cache 적용**
   - [ ] 메서드 레벨 캐싱 적용
   - [ ] 캐시 무효화 로직 구현
   - [ ] 캐시 동작 테스트

## Phase 5: 코드 품질 및 유지보수성 (지속적)

### 5.1 테스트 커버리지 향상
**우선순위: High | 예상 소요: 지속적**

#### Tasks:
1. **단위 테스트 작성**
   - [ ] 서비스 레이어 테스트 (목표: 80% 커버리지)
   - [ ] 컨트롤러 테스트 (MockMvc 활용)
   - [ ] 리포지토리 테스트 (@DataJpaTest)
   - [ ] 유틸리티 클래스 테스트

2. **통합 테스트 작성**
   - [ ] API 엔드포인트 통합 테스트
   - [ ] 인증/인가 플로우 테스트
   - [ ] 트랜잭션 롤백 테스트

### 5.2 문서화
**우선순위: Medium | 예상 소요: 3일**

#### Tasks:
1. **API 문서화**
   - [ ] SpringDoc OpenAPI 통합
   - [ ] API 스펙 자동 생성
   - [ ] 예제 요청/응답 추가
   - [ ] API 문서 생성 테스트

2. **프로젝트 문서화**
   - [ ] README.md 작성
   - [ ] 아키텍처 다이어그램 작성
   - [ ] 개발 환경 설정 가이드
   - [ ] 배포 가이드

### 5.3 코드 품질 도구 도입
**우선순위: Medium | 예상 소요: 1일**

#### Tasks:
1. **정적 분석 도구**
   - [ ] SonarQube 또는 Detekt 설정
   - [ ] 코드 스멜 제거
   - [ ] 복잡도 분석
   - [ ] CI/CD 파이프라인 통합

2. **코드 포맷터**
   - [ ] ktlint 설정
   - [ ] pre-commit hook 설정
   - [ ] 자동 포맷팅 적용

## Phase 6: 모니터링 및 운영 (1주)

### 6.1 로깅 개선
**우선순위: Medium | 예상 소요: 2일**

#### Tasks:
1. **구조화된 로깅**
   - [ ] Logback 설정 최적화
   - [ ] MDC를 활용한 요청 추적
   - [ ] 로그 레벨 적절히 조정
   - [ ] 로깅 성능 테스트

2. **중앙 집중식 로깅**
   - [ ] ELK 스택 또는 CloudWatch 연동
   - [ ] 로그 수집 및 분석 설정
   - [ ] 알림 설정

### 6.2 메트릭 수집
**우선순위: Medium | 예상 소요: 2일**

#### Tasks:
1. **애플리케이션 메트릭**
   - [ ] Micrometer 메트릭 확장
   - [ ] 비즈니스 메트릭 추가
   - [ ] Grafana 대시보드 구성
   - [ ] 메트릭 수집 검증 테스트

2. **성능 모니터링**
   - [ ] APM 도구 연동 (New Relic, Datadog 등)
   - [ ] 슬로우 쿼리 모니터링
   - [ ] API 응답 시간 추적

## 작업 우선순위 매트릭스

| 우선순위 | 작업 카테고리 | 예상 소요 시간 | 비고 |
|---------|------------|--------------|------|
| Critical | Security Issues | 1-2주 | 즉시 시작 필요 |
| High | 의존성/인프라 개선 | 1주 | Security 다음 진행 |
| High | API/아키텍처 개선 | 2-3주 | 병렬 진행 가능 |
| Medium | 성능 최적화 | 1-2주 | 기능 안정화 후 |
| Medium | 코드 품질 | 지속적 | 모든 단계에서 병행 |
| Medium | 모니터링/운영 | 1주 | 배포 전 필수 |

## 테스트 전략

### 각 작업별 테스트 요구사항
1. **모든 새 코드는 테스트와 함께 작성**
2. **기존 코드 수정 시 테스트 먼저 작성 (TDD)**
3. **각 Phase 완료 시 통합 테스트 실행**
4. **목표 테스트 커버리지: 80% 이상**

### 테스트 종류별 적용
- **단위 테스트**: 모든 비즈니스 로직
- **통합 테스트**: API 엔드포인트, 데이터베이스 연동
- **성능 테스트**: 쿼리 최적화, 캐싱 효과
- **보안 테스트**: 인증/인가, 입력 검증

## 진행 방식 권장사항

1. **Phase 1 (Security)부터 순차적으로 진행**
2. **각 작업 완료 시 PR 생성 및 코드 리뷰**
3. **테스트 작성을 작업 완료의 필수 조건으로 설정**
4. **2주 단위 스프린트로 진행 상황 추적**
5. **각 Phase 완료 시 회고 및 다음 단계 계획 수립**